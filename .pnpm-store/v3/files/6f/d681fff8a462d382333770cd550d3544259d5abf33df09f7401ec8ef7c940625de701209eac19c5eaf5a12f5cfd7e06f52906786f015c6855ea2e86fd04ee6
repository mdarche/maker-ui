{"version":3,"sources":["../../src/get/focus-target.js"],"names":["context","except","element","label","result","getTarget","_element","focusable","rules","skipFocusable","Boolean","slice","some"],"mappings":";;;;;;kBAUe,YAAiC;AAAA,iFAAJ,EAAI;AAAA,MAAvBA,OAAuB,QAAvBA,OAAuB;AAAA,MAAdC,MAAc,QAAdA,MAAc;;AAC9C,MAAMC,UAAU,gCAAiB;AAC/BC,WAAO,kBADwB;AAE/BH;AAF+B,GAAjB,CAAhB;;AAKA,MAAII,SAAS,IAAb;AACA,MAAMC,YAAY,SAAZA,SAAY,CAASC,QAAT,EAAmB;AACnC,QAAMC,YAAY,oBAAYC,KAAZ,CAAkB;AAClCR,eAASM,QADyB;AAElCL;AAFkC,KAAlB,CAAlB;;AAKA,QAAIM,SAAJ,EAAe;AACbH,eAASE,QAAT;AACA,aAAO,IAAP;AACD;;AAEDF,aAAS,mCAAuB;AAC9BJ,eAASM,QADqB;AAE9BG,qBAAe;AAFe,KAAvB,CAAT;;AAKA,WAAOC,QAAQN,MAAR,CAAP;AACD,GAjBD;;AAmBA,MAAIC,UAAUH,OAAV,CAAJ,EAAwB;AACtB,WAAOE,MAAP;AACD;;AAED,yBAAW,EAACJ,SAASE,OAAV,EAAX,EAA+BS,KAA/B,CAAqC,CAArC,EAAwCC,IAAxC,CAA6CP,SAA7C;AACA,SAAOD,MAAP;AACD,C;;AArCD;;;;AACA;;;;AACA;;;;AACA;;;;;;;AAPA","file":"focus-target.js","sourcesContent":["\n/*\n  Identify the first focusable element in the element's ancestry, including itself\n*/\n\nimport getFocusRedirectTarget from './focus-redirect-target';\nimport getParents from '../get/parents';\nimport isFocusable from '../is/focusable';\nimport contextToElement from '../util/context-to-element';\n\nexport default function({context, except} = {}) {\n  const element = contextToElement({\n    label: 'get/focus-target',\n    context,\n  });\n\n  let result = null;\n  const getTarget = function(_element) {\n    const focusable = isFocusable.rules({\n      context: _element,\n      except,\n    });\n\n    if (focusable) {\n      result = _element;\n      return true;\n    }\n\n    result = getFocusRedirectTarget({\n      context: _element,\n      skipFocusable: true,\n    });\n\n    return Boolean(result);\n  };\n\n  if (getTarget(element)) {\n    return result;\n  }\n\n  getParents({context: element}).slice(1).some(getTarget);\n  return result;\n}\n"]}