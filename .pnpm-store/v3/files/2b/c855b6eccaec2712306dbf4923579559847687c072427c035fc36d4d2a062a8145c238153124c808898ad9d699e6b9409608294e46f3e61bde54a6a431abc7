{"version":3,"sources":["../../src/when/focusable.js"],"names":["context","callback","area","TypeError","element","label","filterCallback","target","_document","handle","disengage","removeEventListener","addEventListener"],"mappings":";;;;;;;;;;;;;;;;;;;oBAUe,YAAyC;AAAA,mFAAJ,EAAI;AAAA,QAA/BA,OAA+B,QAA/BA,OAA+B;AAAA,QAAtBC,QAAsB,QAAtBA,QAAsB;AAAA,QAAZC,IAAY,QAAZA,IAAY;;AACtD,QAAI,OAAOD,QAAP,KAAoB,UAAxB,EAAoC;AAClC,YAAM,IAAIE,SAAJ,CAAc,2DAAd,CAAN;AACD;;AAED,QAAMC,UAAU,gCAAiB;AAC/BC,aAAO,gBADwB;AAE/BL;AAF+B,KAAjB,CAAhB;;AAKA,QAAMM,iBAAiB,SAAjBA,cAAiB,CAASC,MAAT,EAAiB;AACtC,UAAI,CAAC,yBAAYA,MAAZ,CAAL,EAA0B;AACxB,eAAO,KAAP;AACD;;AAED,aAAON,SAASM,MAAT,CAAP;AACD,KAND;;AAQA,QAAMC,YAAY,2BAAYJ,OAAZ,CAAlB;AACA,QAAMK,SAAS,2BAAgB,EAAET,SAASI,OAAX,EAAoBH,UAAUK,cAA9B,EAA8CJ,UAA9C,EAAhB,CAAf;AACA,QAAMQ,YAAY,SAAZA,SAAY,GAAW;AAC3BF,gBAAUG,mBAAV,CAA8B,OAA9B,EAAuCD,SAAvC,EAAkD,IAAlD;AACAD,gBAAUA,OAAOC,SAAP,EAAV;AACD,KAHD;;AAKAF,cAAUI,gBAAV,CAA2B,OAA3B,EAAoCF,SAApC,EAA+C,IAA/C;;AAEA,WAAO,EAAEA,oBAAF,EAAP;AACD,G","file":"focusable.js","sourcesContent":["\n/*\n  trigger a callback once the context element is focusable and is fully visible in the viewport\n*/\n\nimport whenVisibleArea from './visible-area';\nimport isFocusable from '../is/focusable';\nimport contextToElement from '../util/context-to-element';\nimport getDocument from '../util/get-document';\n\nexport default function({context, callback, area} = {}) {\n  if (typeof callback !== 'function') {\n    throw new TypeError('when/focusable requires options.callback to be a function');\n  }\n\n  const element = contextToElement({\n    label: 'when/focusable',\n    context,\n  });\n\n  const filterCallback = function(target) {\n    if (!isFocusable(target)) {\n      return false;\n    }\n\n    return callback(target);\n  };\n\n  const _document = getDocument(element);\n  const handle = whenVisibleArea({ context: element, callback: filterCallback, area });\n  const disengage = function() {\n    _document.removeEventListener('focus', disengage, true);\n    handle && handle.disengage();\n  };\n\n  _document.addEventListener('focus', disengage, true);\n\n  return { disengage };\n}\n"]}