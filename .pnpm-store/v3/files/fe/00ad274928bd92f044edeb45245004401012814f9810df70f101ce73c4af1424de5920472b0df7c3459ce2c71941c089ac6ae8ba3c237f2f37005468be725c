{"version":3,"sources":["../../src/element/blur.js"],"names":["context","element","label","nodeName","toLowerCase","blur","document","activeElement","_window","HTMLElement","prototype","call","e","body","tabindex","getAttribute","setAttribute","focus","removeAttribute"],"mappings":";;;;;;kBAOe,UAASA,OAAT,EAAkB;AAC/B,MAAMC,UAAU,gCAAiB;AAC/BC,WAAO,cADwB;AAE/BF;AAF+B,GAAjB,CAAhB;;AAKA,MAAI,CAAC,6BAAgBC,OAAhB,CAAL,EAA+B;AAC7B,WAAO,IAAP;AACD;;AAED,MAAME,WAAWF,QAAQE,QAAR,CAAiBC,WAAjB,EAAjB;AACA,MAAID,aAAa,MAAjB,EAAyB;AACvB;AACA;AACA,WAAO,IAAP;AACD;;AAED,MAAIF,QAAQI,IAAZ,EAAkB;AAChBJ,YAAQI,IAAR;AACA,WAAOC,SAASC,aAAhB;AACD;;AAED,MAAMC,UAAU,yBAAUP,OAAV,CAAhB;;AAEA,MAAI;AACF;AACA;AACA;AACA;AACA;AACAO,YAAQC,WAAR,CAAoBC,SAApB,CAA8BL,IAA9B,CAAmCM,IAAnC,CAAwCV,OAAxC;AACD,GAPD,CAOE,OAAOW,CAAP,EAAU;AACV;AACA,QAAMC,OAAOL,QAAQF,QAAR,IAAoBE,QAAQF,QAAR,CAAiBO,IAAlD;AACA,QAAI,CAACA,IAAL,EAAW;AACT,aAAO,IAAP;AACD;;AAED;AACA;AACA,QAAMC,WAAWD,KAAKE,YAAL,CAAkB,UAAlB,CAAjB;AACAF,SAAKG,YAAL,CAAkB,UAAlB,EAA8B,IAA9B;AACAH,SAAKI,KAAL;AACA,QAAIH,QAAJ,EAAc;AACZD,WAAKG,YAAL,CAAkB,UAAlB,EAA8BF,QAA9B;AACD,KAFD,MAEO;AACLD,WAAKK,eAAL,CAAqB,UAArB;AACD;AACF;;AAED,SAAOV,QAAQF,QAAR,CAAiBC,aAAxB;AACD,C;;AAvDD;;;;AACA;;;;AACA;;;;;;AAJA","file":"blur.js","sourcesContent":["\n// wrapper for HTMLElement.prototype.blur\n\nimport isActiveElement from '../is/active-element';\nimport contextToElement from '../util/context-to-element';\nimport getWindow from '../util/get-window';\n\nexport default function(context) {\n  const element = contextToElement({\n    label: 'element/blur',\n    context,\n  });\n\n  if (!isActiveElement(element)) {\n    return null;\n  }\n\n  const nodeName = element.nodeName.toLowerCase();\n  if (nodeName === 'body') {\n    // prevent the browser window from losing focus in IE9\n    // according to https://bugs.jqueryui.com/ticket/9420\n    return null;\n  }\n\n  if (element.blur) {\n    element.blur();\n    return document.activeElement;\n  }\n\n  const _window = getWindow(element);\n\n  try {\n    // The element itself does not have a blur method.\n    // This is true for SVG elements in Firefox and IE,\n    // as well as MathML elements in every browser.\n    // IE9 - 11 will let us abuse HTMLElement's blur method,\n    // Firefox and Edge will throw an error.\n    _window.HTMLElement.prototype.blur.call(element);\n  } catch (e) {\n    // if we're not in an HTML document, we don't have access to document.body\n    const body = _window.document && _window.document.body;\n    if (!body) {\n      return null;\n    }\n\n    // we can't simply call document.body.focus() unless\n    // we make sure the element actually is focusable\n    const tabindex = body.getAttribute('tabindex');\n    body.setAttribute('tabindex', '-1');\n    body.focus();\n    if (tabindex) {\n      body.setAttribute('tabindex', tabindex);\n    } else {\n      body.removeAttribute('tabindex');\n    }\n  }\n\n  return _window.document.activeElement;\n}\n"]}