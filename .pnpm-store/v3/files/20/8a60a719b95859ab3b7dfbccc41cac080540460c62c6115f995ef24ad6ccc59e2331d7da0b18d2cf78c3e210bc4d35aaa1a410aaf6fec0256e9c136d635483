{"version":3,"sources":["../../src/util/image-map.js"],"names":["cssEscape","getDocument","getMapByName","name","_document","map","querySelector","getMapOfImage","element","usemap","getAttribute","slice","getImageOfArea","parentElement","nodeName","toLowerCase"],"mappings":";AACA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;;AAEA,OAAO,SAASC,YAAT,CAAsBC,IAAtB,EAA4BC,SAA5B,EAAuC;AAC5C;AACA;AACA,MAAMC,MAAMD,UAAUE,aAAV,CAAwB,eAAeN,UAAUG,IAAV,CAAf,GAAiC,IAAzD,CAAZ;AACA,SAAOE,OAAO,IAAd;AACD;;AAED,OAAO,SAASE,aAAT,CAAuBC,OAAvB,EAAgC;AACrC,MAAMC,SAASD,QAAQE,YAAR,CAAqB,QAArB,CAAf;AACA,MAAI,CAACD,MAAL,EAAa;AACX,WAAO,IAAP;AACD;;AAED,MAAML,YAAYH,YAAYO,OAAZ,CAAlB;AACA,SAAON,aAAaO,OAAOE,KAAP,CAAa,CAAb,CAAb,EAA8BP,SAA9B,CAAP;AACD;;AAED,OAAO,SAASQ,cAAT,CAAwBJ,OAAxB,EAAiC;AACtC,MAAMH,MAAMG,QAAQK,aAApB;;AAEA,MAAI,CAACR,IAAIF,IAAL,IAAaE,IAAIS,QAAJ,CAAaC,WAAb,OAA+B,KAAhD,EAAuD;AACrD,WAAO,IAAP;AACD;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAMX,YAAYH,YAAYO,OAAZ,CAAlB;AACA,SAAOJ,UAAUE,aAAV,CAAwB,kBAAkBN,UAAUK,IAAIF,IAAd,CAAlB,GAAwC,IAAhE,KAAyE,IAAhF;AACD","file":"image-map.js","sourcesContent":["\nimport cssEscape from 'css.escape';\nimport getDocument from '../util/get-document';\n\nexport function getMapByName(name, _document) {\n  // apparently getElementsByName() also considers id attribute in IE & opera\n  // https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByName\n  const map = _document.querySelector('map[name=\"' + cssEscape(name) + '\"]');\n  return map || null;\n}\n\nexport function getMapOfImage(element) {\n  const usemap = element.getAttribute('usemap');\n  if (!usemap) {\n    return null;\n  }\n\n  const _document = getDocument(element);\n  return getMapByName(usemap.slice(1), _document);\n}\n\nexport function getImageOfArea(element) {\n  const map = element.parentElement;\n\n  if (!map.name || map.nodeName.toLowerCase() !== 'map') {\n    return null;\n  }\n\n  // NOTE: image maps can also be applied to <object> with image content,\n  // but no browser supports this at the moment\n\n  // HTML5 specifies HTMLMapElement.images to be an HTMLCollection of all\n  // <img> and <object> referencing the <map> element, but no browser implements this\n  //   https://www.w3.org/TR/html5/embedded-content-0.html#the-map-element\n  //   https://developer.mozilla.org/en-US/docs/Web/API/HTMLMapElement\n  // the image must be valid and loaded for the map to take effect\n  const _document = getDocument(element);\n  return _document.querySelector('img[usemap=\"#' + cssEscape(map.name) + '\"]') || null;\n}\n"]}