{"version":3,"sources":["../../src/is/only-tabbable.js"],"names":["isOnlyTabbableRules","context","except","onlyFocusableBrowsingContext","visible","element","label","resolveDocument","is","GECKO","TRIDENT","EDGE","frameElement","nodeName","toLowerCase","tabindex","ownerSVGElement","focus","hasAttribute","isOnlyTabbable","rules"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,WAASA,mBAAT,GAMQ;AAAA,mFAAJ,EAAI;AAAA,QALNC,OAKM,QALNA,OAKM;AAAA,2BAJNC,MAIM;AAAA,QAJNA,MAIM,+BAJG;AACPC,oCAA8B,KADvB;AAEPC,eAAS;AAFF,KAIH;;AACN,QAAMC,UAAU,gCAAiB;AAC/BC,aAAO,kBADwB;AAE/BC,uBAAiB,IAFc;AAG/BN;AAH+B,KAAjB,CAAhB;;AAMA,QAAI,CAACC,OAAOE,OAAR,IAAmB,CAAC,uBAAUC,OAAV,CAAxB,EAA4C;AAC1C,aAAO,KAAP;AACD;;AAED,QAAI,CAACH,OAAOC,4BAAR,KAAyC,mBAASK,EAAT,CAAYC,KAAZ,IAAqB,mBAASD,EAAT,CAAYE,OAAjC,IAA4C,mBAASF,EAAT,CAAYG,IAAjG,CAAJ,EAA4G;AAC1G,UAAMC,eAAe,+BAAgBP,OAAhB,CAArB;AACA,UAAIO,YAAJ,EAAkB;AAChB,YAAI,6BAAcA,YAAd,IAA8B,CAAlC,EAAqC;AACnC;AACA;AACA,iBAAO,KAAP;AACD;AACF;AACF;;AAED,QAAMC,WAAWR,QAAQQ,QAAR,CAAiBC,WAAjB,EAAjB;AACA,QAAMC,WAAW,6BAAcV,OAAd,CAAjB;;AAEA,QAAIQ,aAAa,OAAb,IAAwB,mBAASL,EAAT,CAAYC,KAAxC,EAA+C;AAC7C;AACA,aAAOM,aAAa,IAAb,IAAqBA,YAAY,CAAxC;AACD;;AAED;AACA;AACA;AACA,QAAI,mBAASP,EAAT,CAAYC,KAAZ,IAAqBJ,QAAQW,eAA7B,IAAgD,CAACX,QAAQY,KAA7D,EAAoE;AAClE,UAAIJ,aAAa,GAAb,IAAoBR,QAAQa,YAAR,CAAqB,YAArB,CAAxB,EAA4D;AAC1D;AACA,YAAI,mBAASV,EAAT,CAAYC,KAAhB,EAAuB;AACrB,iBAAO,IAAP;AACD;AACF;AACF;;AAED,WAAO,KAAP;AACD;;AAED;AACAT,sBAAoBE,MAApB,GAA6B,YAAsB;AAAA,QAAbA,MAAa,uEAAJ,EAAI;;AACjD,QAAMiB,iBAAiB,SAAjBA,cAAiB,CAASlB,OAAT,EAAkB;AACvC,aAAOD,oBAAoB;AACzBC,wBADyB;AAEzBC;AAFyB,OAApB,CAAP;AAID,KALD;;AAOAiB,mBAAeC,KAAf,GAAuBpB,mBAAvB;AACA,WAAOmB,cAAP;AACD,GAVD;;AAYA;AACA,MAAMA,iBAAiBnB,oBAAoBE,MAApB,CAA2B,EAA3B,CAAvB;oBACeiB,c","file":"only-tabbable.js","sourcesContent":["\nimport isVisible from './visible';\nimport contextToElement from '../util/context-to-element';\nimport getFrameElement from '../util/get-frame-element';\nimport tabindexValue from '../util/tabindex-value';\nimport platform from '../util/platform';\n\nfunction isOnlyTabbableRules({\n  context,\n  except = {\n    onlyFocusableBrowsingContext: false,\n    visible: false,\n  },\n} = {}) {\n  const element = contextToElement({\n    label: 'is/only-tabbable',\n    resolveDocument: true,\n    context,\n  });\n\n  if (!except.visible && !isVisible(element)) {\n    return false;\n  }\n\n  if (!except.onlyFocusableBrowsingContext && (platform.is.GECKO || platform.is.TRIDENT || platform.is.EDGE)) {\n    const frameElement = getFrameElement(element);\n    if (frameElement) {\n      if (tabindexValue(frameElement) < 0) {\n        // iframe[tabindex=\"-1\"] and object[tabindex=\"-1\"] inherit the\n        // tabbable demotion onto elements of their browsing contexts\n        return false;\n      }\n    }\n  }\n\n  const nodeName = element.nodeName.toLowerCase();\n  const tabindex = tabindexValue(element);\n\n  if (nodeName === 'label' && platform.is.GECKO) {\n    // Firefox cannot focus, but tab to: label[tabindex=0]\n    return tabindex !== null && tabindex >= 0;\n  }\n\n  // SVG Elements were keyboard focusable but not script focusable before Firefox 51.\n  // Firefox 51 added the focus management DOM API (.focus and .blur) to SVGElement,\n  // see https://bugzilla.mozilla.org/show_bug.cgi?id=778654\n  if (platform.is.GECKO && element.ownerSVGElement && !element.focus) {\n    if (nodeName === 'a' && element.hasAttribute('xlink:href')) {\n      // any focusable child of <svg> cannot be focused, but tabbed to\n      if (platform.is.GECKO) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n// bind exceptions to an iterator callback\nisOnlyTabbableRules.except = function(except = {}) {\n  const isOnlyTabbable = function(context) {\n    return isOnlyTabbableRules({\n      context,\n      except,\n    });\n  };\n\n  isOnlyTabbable.rules = isOnlyTabbableRules;\n  return isOnlyTabbable;\n};\n\n// provide isOnlyTabbable(context) as default iterator callback\nconst isOnlyTabbable = isOnlyTabbableRules.except({});\nexport default isOnlyTabbable;\n"]}